import { Meta, StoryFn } from "@storybook/react";
import {
  ResultsTable as ResultsTableComponent,
  ResultsTableProps,
} from "./ResultsTable";
import {
  InstrumentResultDto,
  InstrumentType,
  ServiceCategory,
} from "@viewpoint/api";
import {
  randomInstrumentResult,
  randomInstrumentRun,
} from "@viewpoint/test-utils";

const meta: Meta = {
  title: "viewpoint/Results Table",
  component: ResultsTableComponent,
};
export default meta;

const ResultsTableTemplate: StoryFn<ResultsTableProps> = (args) => (
  <ResultsTableComponent {...args} />
);

const DefaultResults: Partial<InstrumentResultDto>[] = [
  {
    speedBarMax: 10,
    speedBarMin: 2,
    referenceHigh: 8.87,
    referenceLow: 5.65,
    assayIdentityName: "RBC",
    assay: "RBC",
    assayUnits: "M/μL",
    resultValue: "8.83",
    referenceRangeString: "5.65 - 8.87",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 70,
    speedBarMin: 15,
    referenceHigh: 61.7,
    referenceLow: 37.3,
    assayIdentityName: "HCT",
    assay: "HCT",
    assayUnits: "%",
    resultValue: "68.6",
    referenceRangeString: "37.3 - 61.7",
    outOfRangeHigh: true,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 24,
    speedBarMin: 5,
    referenceHigh: 20.5,
    referenceLow: 13.1,
    assayIdentityName: "HGB",
    assay: "HGB",
    assayUnits: "g/dL",
    resultValue: "16.4",
    referenceRangeString: "13.1 - 20.5",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 90,
    speedBarMin: 50,
    referenceHigh: 73.5,
    referenceLow: 61.6,
    assayIdentityName: "MCV",
    assay: "MCV",
    assayUnits: "fL",
    resultValue: "100.4",
    referenceRangeString: "61.6 - 73.5",
    outOfRangeHigh: true,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 35,
    speedBarMin: 14,
    referenceHigh: 25.9,
    referenceLow: 21.2,
    assayIdentityName: "MCH",
    assay: "MCH",
    assayUnits: "pg",
    resultValue: "24.0",
    referenceRangeString: "21.2 - 25.9",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 42,
    speedBarMin: 26,
    referenceHigh: 37.9,
    referenceLow: 32,
    assayIdentityName: "MCHC",
    assay: "MCHC",
    assayUnits: "g/dL",
    resultValue: "23.9",
    referenceRangeString: "32.0 - 37.9",
    outOfRangeHigh: false,
    outOfRangeLow: true,
  },
  {
    speedBarMax: 35,
    speedBarMin: 6,
    referenceHigh: 21.7,
    referenceLow: 13.6,
    assayIdentityName: "RDW",
    assay: "RDW",
    assayUnits: "%",
    resultValue: "24.2",
    referenceRangeString: "13.6 - 21.7",
    outOfRangeHigh: true,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%RETIC",
    assay: "%RETIC",
    assayUnits: "%",
    resultValue: "0.5",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 400,
    speedBarMin: 0,
    referenceHigh: 110,
    referenceLow: 10,
    assayIdentityName: "RETIC",
    assay: "RETIC",
    assayUnits: "K/μL",
    resultValue: "35.5",
    referenceRangeString: "10.0 - 110.0",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 40,
    speedBarMin: 2,
    referenceHigh: 16.76,
    referenceLow: 5.05,
    assayIdentityName: "WBC",
    assay: "WBC",
    assayUnits: "K/μL",
    resultValue: "9.46",
    referenceRangeString: "5.05 - 16.76",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%NEU",
    assay: "%NEU",
    assayUnits: "%",
    resultValue: "83.6",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%LYM",
    assay: "%LYM",
    assayUnits: "%",
    resultValue: "3.4",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%MONO",
    assay: "%MONO",
    assayUnits: "%",
    resultValue: "0.6",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%EOS",
    assay: "%EOS",
    assayUnits: "%",
    resultValue: "6.7",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 9999999,
    speedBarMin: -9999999,
    referenceHigh: 9999999,
    referenceLow: -9999999,
    assayIdentityName: "%BASO",
    assay: "%BASO",
    assayUnits: "%",
    resultValue: "5.7",
    referenceRangeString: "",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 40,
    speedBarMin: 0.5,
    referenceHigh: 11.64,
    referenceLow: 2.95,
    assayIdentityName: "NEU",
    assay: "NEU",
    assayUnits: "K/μL",
    resultValue: "7.91",
    referenceRangeString: "2.95 - 11.64",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 10,
    speedBarMin: 0.1,
    referenceHigh: 5.1,
    referenceLow: 1.05,
    assayIdentityName: "LYM",
    assay: "LYM",
    assayUnits: "K/μL",
    resultValue: "0.32",
    referenceRangeString: "1.05 - 5.10",
    outOfRangeHigh: false,
    outOfRangeLow: true,
  },
  {
    speedBarMax: 4,
    speedBarMin: 0,
    referenceHigh: 1.12,
    referenceLow: 0.16,
    assayIdentityName: "MONO",
    assay: "MONO",
    assayUnits: "K/μL",
    resultValue: "0.06",
    referenceRangeString: "0.16 - 1.12",
    outOfRangeHigh: false,
    outOfRangeLow: true,
  },
  {
    speedBarMax: 5,
    speedBarMin: 0,
    referenceHigh: 1.23,
    referenceLow: 0.06,
    assayIdentityName: "EOS",
    assay: "EOS",
    assayUnits: "K/μL",
    resultValue: "0.63",
    referenceRangeString: "0.06 - 1.23",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 0.5,
    speedBarMin: 0,
    referenceHigh: 0.1,
    referenceLow: 0,
    assayIdentityName: "BASO",
    assay: "BASO",
    assayUnits: "K/μL",
    resultValue: "0.54",
    referenceRangeString: "0.00 - 0.10",
    outOfRangeHigh: true,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 1000,
    speedBarMin: 25,
    referenceHigh: 484,
    referenceLow: 148,
    assayIdentityName: "PLT",
    assay: "PLT",
    assayUnits: "K/μL",
    resultValue: "353",
    referenceRangeString: "148 - 484",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 25,
    speedBarMin: 2,
    referenceHigh: 13.2,
    referenceLow: 8.7,
    assayIdentityName: "MPV",
    assay: "MPV",
    assayUnits: "fL",
    resultValue: "12.3",
    referenceRangeString: "8.7 - 13.2",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 30,
    speedBarMin: 1,
    referenceHigh: 19.4,
    referenceLow: 9.1,
    assayIdentityName: "PDW01",
    assay: "PDW",
    assayUnits: "fL",
    resultValue: "17.0",
    referenceRangeString: "9.1 - 19.4",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
  {
    speedBarMax: 0.9,
    speedBarMin: 0.01,
    referenceHigh: 0.46,
    referenceLow: 0.14,
    assayIdentityName: "PCT",
    assay: "PCT",
    assayUnits: "%",
    resultValue: "0.40",
    referenceRangeString: "0.14 - 0.46",
    outOfRangeHigh: false,
    outOfRangeLow: false,
  },
];

export const ResultsTable = ResultsTableTemplate.bind({});
const args: ResultsTableProps = {
  serviceCategory: ServiceCategory.Hematology,
  instrumentRuns: [
    randomInstrumentRun({
      instrumentType: InstrumentType.ProCyteDx,
      instrumentResultDtos: DefaultResults.map(randomInstrumentResult),
    }),
  ],
  historicalRuns: [],
  expanded: true,
  onToggleExpanded: () => {},
};
ResultsTable.args = args;
